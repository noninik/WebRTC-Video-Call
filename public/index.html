<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>NEXUS</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
</head>
<body>

<div id="join-screen">
  <div class="orb orb-1"></div>
  <div class="orb orb-2"></div>
  <div class="orb orb-3"></div>
  <div class="join-card">
    <div class="logo"><i class="fas fa-bolt"></i></div>
    <h1>NEXUS</h1>
    <p class="subtitle">Encrypted P2P Calls</p>
    <input type="text" id="nickname-input" placeholder="Your name" autocomplete="off" spellcheck="false" maxlength="20"/>
    <div class="input-group">
      <input type="text" id="room-input" placeholder="Room ID" autocomplete="off" spellcheck="false"/>
      <button id="join-btn"><i class="fas fa-arrow-right"></i></button>
    </div>
    <button id="random-btn"><i class="fas fa-shuffle"></i> Generate Room</button>
    <p id="status-text"></p>
    <div class="features">
      <div class="feature"><i class="fas fa-bolt"></i><span>Zero Lag</span></div>
      <div class="feature"><i class="fas fa-shield-halved"></i><span>E2E</span></div>
      <div class="feature"><i class="fas fa-ghost"></i><span>Anonymous</span></div>
    </div>
  </div>
</div>

<div id="call-screen" class="hidden">
  <div id="sidebar">
    <div class="sidebar-header"><i class="fas fa-bolt"></i><span>NEXUS</span></div>
    <div class="channel-section">
      <div class="channel-label">Voice Channel</div>
      <div class="channel-item active"><i class="fas fa-wifi"></i><span id="sidebar-room">Room</span></div>
      <div class="channel-users" id="channel-users-list">
        <div class="channel-user">
          <div class="status-dot online"></div>
          <div class="user-avatar local-avatar"><i class="fas fa-user"></i></div>
          <span id="sidebar-self-name">You</span>
          <div class="user-indicators">
            <i class="fas fa-microphone" id="indicator-mic"></i>
            <i class="fas fa-video" id="indicator-cam"></i>
          </div>
        </div>
      </div>
    </div>
    <div class="user-panel">
      <div class="user-info">
        <div class="status-dot online small-dot"></div>
        <div class="user-avatar local-avatar small"><i class="fas fa-user"></i></div>
        <div class="user-name">
          <span id="panel-self-name">You</span>
          <span class="user-status" id="connection-quality">Connecting...</span>
        </div>
      </div>
      <div class="user-controls">
        <button id="toggle-mic" class="control-btn" title="Mic"><i class="fas fa-microphone"></i></button>
        <button id="toggle-cam" class="control-btn" title="Camera"><i class="fas fa-video"></i></button>
        <button id="theme-btn" class="control-btn" title="Toggle theme"><i class="fas fa-sun"></i></button>
        <button id="settings-btn" class="control-btn" title="Settings"><i class="fas fa-gear"></i></button>
      </div>
    </div>
  </div>

  <div id="main-area">
    <div id="top-bar">
      <div class="top-bar-left">
        <i class="fas fa-bolt"></i>
        <span id="top-room-name">Room</span>
        <span class="separator">|</span>
        <span class="top-bar-hint" id="call-status">Connecting...</span>
      </div>
      <div class="top-bar-right">
        <button id="stats-btn" class="top-btn" title="Connection stats"><i class="fas fa-chart-simple"></i></button>
        <button id="invite-btn" class="top-btn" title="Copy invite"><i class="fas fa-link"></i></button>
        <button id="toggle-fullscreen" class="top-btn" title="Fullscreen"><i class="fas fa-expand"></i></button>
      </div>
    </div>

    <div id="videos">
      <div class="video-container local-small" id="local-container">
        <video id="local-video" autoplay muted playsinline></video>
        <div class="video-overlay hidden" id="local-overlay">
          <div class="no-video-avatar small"><i class="fas fa-user"></i></div>
        </div>
        <div class="video-name"><span id="local-video-name">You</span></div>
        <div class="speaking-indicator hidden" id="local-speaking"><i class="fas fa-volume-high"></i></div>
      </div>
    </div>

    <div id="reactions-float"></div>
    <div id="toast-container"></div>
    <div id="copied-tooltip" class="hidden">Copied!</div>
    <div id="ptt-indicator" class="hidden"><i class="fas fa-walkie-talkie"></i> Push-to-Talk: Hold Space</div>

    <!-- Stats panel -->
    <div id="stats-panel" class="hidden">
      <div id="stats-header">
        <span><i class="fas fa-chart-simple"></i> Connection Stats</span>
        <button id="stats-close"><i class="fas fa-xmark"></i></button>
      </div>
      <div id="stats-body">
        <div class="stat-row"><span class="stat-label">Ping</span><span class="stat-val" id="stat-ping">-- ms</span></div>
        <div class="stat-row"><span class="stat-label">â†‘ Send</span><span class="stat-val" id="stat-send">-- kbps</span></div>
        <div class="stat-row"><span class="stat-label">â†“ Receive</span><span class="stat-val" id="stat-recv">-- kbps</span></div>
        <div class="stat-row"><span class="stat-label">Packets Lost</span><span class="stat-val" id="stat-lost">--</span></div>
        <div class="stat-row"><span class="stat-label">Resolution</span><span class="stat-val" id="stat-res">--</span></div>
        <div class="stat-row"><span class="stat-label">Framerate</span><span class="stat-val" id="stat-fps">-- fps</span></div>
        <div class="stat-row"><span class="stat-label">Codec</span><span class="stat-val" id="stat-codec">--</span></div>
        <div class="stat-row"><span class="stat-label">Connection</span><span class="stat-val" id="stat-type">--</span></div>
      </div>
    </div>

    <div id="call-controls">
      <button id="toggle-mic-2" class="call-btn" title="Mic"><i class="fas fa-microphone"></i></button>
      <button id="toggle-cam-2" class="call-btn" title="Camera"><i class="fas fa-video"></i></button>
      <button id="switch-cam-btn" class="call-btn" title="Switch Camera"><i class="fas fa-camera-rotate"></i></button>
      <button id="toggle-screen-btn" class="call-btn" title="Share Screen"><i class="fas fa-display"></i></button>
      <button id="ptt-btn" class="call-btn" title="Push-to-Talk"><i class="fas fa-walkie-talkie"></i></button>
      <button id="soundboard-btn" class="call-btn" title="Soundboard"><i class="fas fa-music"></i></button>
      <div class="reactions-bar">
        <button class="react-btn" data-emoji="ğŸ‘">ğŸ‘</button>
        <button class="react-btn" data-emoji="ğŸ‰">ğŸ‰</button>
        <button class="react-btn" data-emoji="ğŸ˜‚">ğŸ˜‚</button>
        <button class="react-btn" data-emoji="ğŸ”¥">ğŸ”¥</button>
        <button class="react-btn" data-emoji="â¤ï¸">â¤ï¸</button>
        <button class="react-btn" data-emoji="ğŸ’€">ğŸ’€</button>
      </div>
      <div class="volume-control"><i class="fas fa-volume-high"></i><input type="range" id="volume-slider" min="0" max="100" value="100"/></div>
      <button id="chat-toggle-btn" class="call-btn" title="Chat"><i class="fas fa-comment"></i></button>
      <button id="hang-up" class="call-btn danger" title="Leave"><i class="fas fa-phone-slash"></i></button>
    </div>
  </div>

  <!-- SOUNDBOARD -->
  <div id="soundboard-panel" class="hidden">
    <div id="sb-header"><span><i class="fas fa-music"></i> Soundboard</span><button id="sb-close"><i class="fas fa-xmark"></i></button></div>
    <div id="sb-grid">
      <button class="sb-btn" data-sound="airhorn">ğŸ“¯ Air Horn</button>
      <button class="sb-btn" data-sound="drum">ğŸ¥ Drum</button>
      <button class="sb-btn" data-sound="tada">ğŸ‰ Tada</button>
      <button class="sb-btn" data-sound="fail">ğŸ˜‚ Fail</button>
      <button class="sb-btn" data-sound="laser">ğŸ”« Laser</button>
      <button class="sb-btn" data-sound="boing">ğŸ€ Boing</button>
      <button class="sb-btn" data-sound="bell">ğŸ”” Bell</button>
      <button class="sb-btn" data-sound="whoosh">ğŸ’¨ Whoosh</button>
      <button class="sb-btn" data-sound="pop">ğŸ’¥ Pop</button>
      <button class="sb-btn" data-sound="buzzer">ğŸš¨ Buzzer</button>
      <button class="sb-btn" data-sound="whistle">ğŸ˜™ Whistle</button>
      <button class="sb-btn" data-sound="clap">ğŸ‘ Clap</button>
    </div>
  </div>

  <!-- CHAT -->
  <div id="chat-panel" class="hidden">
    <div id="chat-header"><span><i class="fas fa-comment"></i> Chat</span><button id="chat-close"><i class="fas fa-xmark"></i></button></div>
    <div id="chat-messages"></div>
    <div id="typing-indicator" class="hidden"><span id="typing-text">typing...</span></div>
    <div id="emoji-picker" class="hidden">
      <div class="picker-search"><input type="text" id="emoji-search" placeholder="Search emoji..."/></div>
      <div id="emoji-cats"><button class="ecat active" data-c="frequent">â­</button><button class="ecat" data-c="smileys">ğŸ˜€</button><button class="ecat" data-c="people">ğŸ‘‹</button><button class="ecat" data-c="animals">ğŸ±</button><button class="ecat" data-c="food">ğŸ•</button><button class="ecat" data-c="objects">ğŸ’¡</button><button class="ecat" data-c="symbols">â¤ï¸</button></div>
      <div id="emoji-list"></div>
    </div>
    <div id="gif-picker" class="hidden">
      <div class="picker-search"><input type="text" id="gif-search" placeholder="Search GIFs..."/></div>
      <div id="gif-results"></div>
      <div id="gif-powered">Powered by Tenor</div>
    </div>
    <div id="chat-input-area">
      <button id="emoji-btn" class="chat-extra-btn" title="Emoji"><i class="fas fa-face-smile"></i></button>
      <button id="gif-btn" class="chat-extra-btn" title="GIF">GIF</button>
      <input type="text" id="chat-input" placeholder="Message..." autocomplete="off" spellcheck="false" maxlength="2000"/>
      <button id="chat-send"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <!-- SETTINGS -->
  <div id="settings-modal" class="modal hidden">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <div class="modal-header"><h2><i class="fas fa-gear"></i> Settings</h2><button class="modal-close" id="settings-close"><i class="fas fa-xmark"></i></button></div>
      <div class="modal-body">
        <div class="sg"><label>Microphone</label><select id="mic-select"></select></div>
        <div class="sg"><label>Speaker</label><select id="speaker-select"></select></div>
        <div class="sg"><label>Camera</label><select id="cam-select"></select><button id="apply-cam-btn" class="apply-btn">Apply</button></div>
        <div class="sg"><label>Mic Test</label><div class="mic-level-bar"><div class="mic-level-fill" id="mic-level"></div></div></div>
        <div class="sg"><label><input type="checkbox" id="noise-toggle" checked/> Noise Suppression</label></div>
        <div class="sg"><label><input type="checkbox" id="echo-toggle" checked/> Echo Cancellation</label></div>
      </div>
    </div>
  </div>

  <!-- VOLUME MODAL -->
  <div id="vol-modal" class="hidden">
    <div class="vol-modal-inner">
      <div class="vol-modal-name" id="vol-modal-name">User</div>
      <input type="range" id="vol-modal-slider" min="0" max="200" value="100"/>
      <span id="vol-modal-val">100%</span>
      <button id="vol-modal-mute" class="vol-modal-btn"><i class="fas fa-volume-xmark"></i> Mute</button>
      <button id="vol-modal-close" class="vol-modal-btn close"><i class="fas fa-xmark"></i></button>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
