<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebRTC Video Call</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Particles background -->
        <div class="particles" id="particles"></div>

        <!-- Landing / Lobby -->
        <div class="screen active" id="lobby-screen">
            <div class="lobby-container">
                <div class="logo-section">
                    <div class="logo-icon">
                        <i class="fas fa-video"></i>
                        <div class="logo-pulse"></div>
                    </div>
                    <h1 class="app-title">WebRTC Call</h1>
                    <p class="app-subtitle">Secure peer-to-peer video calls</p>
                </div>

                <div class="lobby-card">
                    <div class="card-glow"></div>
                    
                    <div class="input-group">
                        <div class="input-wrapper">
                            <i class="fas fa-hashtag input-icon"></i>
                            <input type="text" id="room-id-input" placeholder="Enter Room ID" maxlength="20" autocomplete="off">
                            <button class="btn-generate" id="btn-generate" title="Generate random ID">
                                <i class="fas fa-dice"></i>
                            </button>
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn btn-primary" id="btn-create">
                            <i class="fas fa-plus-circle"></i>
                            <span>Create Room</span>
                            <div class="btn-shimmer"></div>
                        </button>
                        <button class="btn btn-secondary" id="btn-join">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Join Room</span>
                            <div class="btn-shimmer"></div>
                        </button>
                    </div>

                    <div class="status-message" id="lobby-status"></div>
                </div>

                <div class="features">
                    <div class="feature-item">
                        <i class="fas fa-lock"></i>
                        <span>End-to-end encrypted</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-bolt"></i>
                        <span>Low latency</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-server"></i>
                        <span>No server relay</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Call Screen -->
        <div class="screen" id="call-screen">
            <div class="call-header">
                <div class="call-info">
                    <div class="call-status-dot"></div>
                    <span class="call-status-text" id="call-status-text">Connecting...</span>
                </div>
                <div class="call-timer" id="call-timer">00:00</div>
                <div class="room-info">
                    <i class="fas fa-hashtag"></i>
                    <span id="room-id-display"></span>
                    <button class="btn-copy" id="btn-copy-room" title="Copy Room ID">
                        <i class="fas fa-copy"></i>
                    </button>
                </div>
            </div>

            <div class="videos-container" id="videos-container">
                <div class="video-wrapper remote-video-wrapper" id="remote-video-wrapper">
                    <video id="remote-video" autoplay playsinline></video>
                    <div class="video-placeholder" id="remote-placeholder">
                        <div class="avatar-circle">
                            <i class="fas fa-user"></i>
                        </div>
                        <p>Waiting for peer...</p>
                        <div class="connecting-dots">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                    <div class="video-label">
                        <i class="fas fa-user"></i>
                        <span>Remote</span>
                    </div>
                </div>

                <div class="video-wrapper local-video-wrapper" id="local-video-wrapper">
                    <video id="local-video" autoplay playsinline muted></video>
                    <div class="video-placeholder local-placeholder" id="local-placeholder">
                        <div class="avatar-circle small">
                            <i class="fas fa-user"></i>
                        </div>
                    </div>
                    <div class="video-label">
                        <i class="fas fa-user"></i>
                        <span>You</span>
                    </div>
                    <div class="drag-handle">
                        <i class="fas fa-grip-dots"></i>
                    </div>
                </div>
            </div>

            <div class="controls-bar">
                <div class="controls-wrapper">
                    <button class="control-btn" id="btn-toggle-mic" title="Toggle Microphone">
                        <i class="fas fa-microphone"></i>
                        <span class="control-label">Mic</span>
                    </button>
                    <button class="control-btn" id="btn-toggle-camera" title="Toggle Camera">
                        <i class="fas fa-video"></i>
                        <span class="control-label">Camera</span>
                    </button>
                    <button class="control-btn" id="btn-switch-camera" title="Switch Camera">
                        <i class="fas fa-sync-alt"></i>
                        <span class="control-label">Flip</span>
                    </button>
                    <button class="control-btn btn-screen" id="btn-screen-share" title="Share Screen">
                        <i class="fas fa-desktop"></i>
                        <span class="control-label">Screen</span>
                    </button>
                    <button class="control-btn btn-hangup" id="btn-hangup" title="End Call">
                        <i class="fas fa-phone-slash"></i>
                        <span class="control-label">End</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toast-container"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="app.js"></script>
</body>
</html>
